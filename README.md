Here is the content from the provided document, formatted as a README.md file for GitHub.Web-Controlled AC Fan/Light Dimmer using Arduino 1A simple yet powerful IoT project that demonstrates how to safely control and dim a 220V AC light bulb or control the speed of a ceiling fan from a local webpage2. This project uses an Arduino to handle the precise timing required for phase control dimming/speed of AC home appliances, with a Python Flask server acting as a bridge between the web interface and the Arduino3.Features 4Web-Based Control: A clean, modern user interface to control the light from any device on the same local network5.Three Power Modes: 6ON: Full brightness7.HALF: Dims the light to approximately 50% power8.OFF: Safely turns the light/fan off9.Phase Control Dimming: Utilizes a zero-cross detection circuit and a TRIAC for smooth and efficient dimming of AC loads10.Safe High-Voltage Isolation: Optocouplers are used to ensure the low-voltage Arduino is safely isolated from the high-voltage AC mains11.Technology Stack 12Hardware: Arduino Uno (or compatible), TRIAC (BTA16), Zero-Cross Detector (LTV814), TRIAC Driver (MOC3021), Resistors, Safety Capacitor13.Arduino: C++ 14Web Server: Python with Flask 15Communication: Python pyserial library for USB communication16.Frontend: HTML with Tailwind CSS for styling17.Hardware and Circuit Diagram 18Required Components 191x Arduino Uno or Nano 201x BTA16 TRIAC 211x LTV814 Optocoupler (for Zero-Cross Detection) 221x MOC3021 Optocoupler (for TRIAC Driving) 232x 100kŒ© Resistor (1 Watt) 241x 1kŒ© Resistor (1/4 Watt) 251x 330Œ© Resistor (1/4 Watt) 261x 360Œ© Resistor (1/2 Watt) 271x 100Œ© Resistor (1 Watt for snubber) 281x 0.1¬µF (100nF), 275V AC X2-Rated Safety Capacitor (for snubber) 29An AC light bulb and holder or ceiling fan 30Connecting wires 31Note: The capacitor used in the actual snubber circuit is 0.01uf because of lack of components32. The resistors in parallel and series connection make up the 100 ohm 1 watt resistance33.Circuit Diagram(The provided document includes a hand-drawn circuit diagram 34and a photo of the physical build35. You should add these images to your repository and link them here.)Hand-Drawn Circuit![Circuit Diagram](path/to/your/circuit_diagram.jpg)Physical Circuit![Physical Circuit](path/to/your/physical_circuit.jpg)Hardware Details & Theory of Operation 36Pin Connections 37This table details the critical connections between the components38.From ComponentFrom PinTo ComponentTo PinPurposeLTV814 (Zero-Cross)Pin 1AC Live (via 100kŒ© Resistor)AC Input for detectorLTV814Pin 2AC Neutral (via 100kŒ© Resistor)AC Input for detectorLTV814Pin 3 (Emitter)ArduinoGNDGround referenceLTV814Pin 4 (Collector)ArduinoPin 2Zero-cross signal outputArduino5V1kŒ© ResistorLeg 1Pull-up resistor power1kŒ© ResistorLeg 2LTV814Pin 4Pulls Pin 2 HIGH at zero-crossMOC3021 (TRIAC Driver)Pin 1Arduino (via 330Œ© Resistor)Pin 4Receives trigger pulseMOC3021Pin 2ArduinoGNDGround referenceMOC3021Pin 4BTA16 TRIAC (via 360Œ© Resistor)GateDelivers trigger to TRIACMOC3021Pin 6AC LivePowers the MOC3021's internal TRIACBTA16 TRIACA2AC LiveMain AC terminalBTA16 TRIACA1AC Load (Light Bulb)Main AC terminalCore Concepts 39What is a TRIAC? 40A TRIAC (Triode for Alternating Current) is a semiconductor component that acts as a high-power switch for AC electricity41. It can be turned on by a small electrical pulse from a microcontroller42. Once triggered, it stays on, allowing current to flow until the current drops to zero (which naturally happens at the end of each AC half-cycle)43. This ability to be turned on at a precise moment makes it perfect for dimming44. In this circuit, the BTA16 is the main TRIAC that switches the power to the light bulb45.The Zero-Cross Detection Circuit 46To dim an AC light, we use a technique called phase control, where we turn the light on for only a fraction of each AC half-wave47. To do this, the Arduino needs a timing reference48. It must know the exact moment the AC wave crosses zero volts so it can start its timer49.The Solution: The zero-cross detection circuit provides this reference50.The two 100kŒ© resistors safely limit the high AC voltage51.For most of the AC cycle, current flows through the resistors and turns on the internal LED of the LTV814 optocoupler52.This light activates the LTV814's internal phototransistor, which pulls the Arduino's Pin 2 LOW53.At the exact moment the AC voltage crosses zero, the internal LED turns off, the phototransistor turns off, and the external 1kŒ© pull-up resistor pulls Pin 2 HIGH54.The Arduino detects this LOW-to-HIGH signal as an interrupt, which tells it "The AC wave just crossed zero. Start your timer now!"55.The Snubber Circuit 56The Problem: Inductive loads like fan motors can create a large, sudden voltage spike when the TRIAC abruptly stops the current flow57. This spike can be high enough to falsely re-trigger the TRIAC or even damage it58.The Solution: A snubber circuit is a simple filter designed to absorb this spike59. It consists of a resistor (e.g., 100Œ©) and a capacitor (e.g., 0.1¬µF) connected in parallel with the TRIAC60.The capacitor provides a path for the high-frequency voltage spike to bypass the TRIAC, absorbing its energy61. The resistor limits the current flow through the capacitor62.It is critical to use an X2-rated safety capacitor, as it is designed to fail safely (open circuit) when connected directly across the AC mains, preventing a fire hazard63.Software Setup and Installation 64(The document notes that all code is available on a GitHub page65. You should link to the files in your repository.)Step 1: Program the Arduino 66Code: Use the code from Arduino_Dimmer_Sketch.ino67.Upload: Connect your Arduino and upload the sketch68.Close IDE: After uploading, completely close the Arduino IDE to free up the serial port69.Step 2: Set Up the Python Web Server 70Install Libraries: Open a command prompt and run:Bashpip install Flask pyserial [cite: 109]
File Structure: Organize your project folder exactly as follows71:AC_Controller/
‚îú‚îÄ‚îÄ app.py [cite: 112]
‚îî‚îÄ‚îÄ templates/ [cite: 113]
    ‚îî‚îÄ‚îÄ index.html [cite: 114]
How to Run 72Connect Arduino: Connect the circuit and Arduino to your computer via USB73.Configure Port: Open app.py and change SERIAL_PORT to match your Arduino's port (e.g., COM3)74747474.Start Server: Open a terminal, navigate to the AC_Controller folder, and run75:Bashpy app.py [cite: 119]
The terminal should show that it successfully connected to the Arduino and is running the web server76.Control the Light/Fan: Open a web browser on your computer or any device on the same Wi-Fi network and go to77:http://127.0.0.1:5000 78The web interface will load, and you can now control your light bulb or fan79.Screenshots(You can add the screenshots from the document 80808080 to your repository and display them here.)Web Interface![Web UI](path/to/your/web_ui.png)Terminal Output![Terminal Output](path/to/your/terminal.png)‚ö†Ô∏è HIGH VOLTAGE WARNING ‚ö†Ô∏è 81This project involves working directly with lethal 220V AC mains voltage. 82* Never test this circuit on a breadboard83. Use a properly soldered perfboard or a custom PCB84.* Always disconnect the power before touching any part of the circuit85.* Use a fuse on the live AC input for safety86.* House the final project in a non-conductive enclosure to prevent accidental contact87.Safety is your responsibility. Proceed with extreme caution. 88üöÄ Future Improvements 89Upgrade to ESP8266/ESP32: Replace the Arduino and Python server with a single ESP8266/ESP32 to host the web server directly on the microcontroller90.Slider Control: Implement a slider on the webpage for fully variable dimming instead of fixed modes91.MQTT Integration: Add MQTT support to integrate the dimmer into a larger smart home system92.
